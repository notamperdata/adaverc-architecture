<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1200" height="800" fill="#f8fafc"/>
  
  <!-- Title -->
  <text x="600" y="40" text-anchor="middle" fill="#1e293b" font-size="24" font-weight="bold">notamperdata End-to-End Data Flow</text>
  
  <!-- Step 1: Form Submission -->
  <rect x="50" y="80" width="140" height="100" rx="10" fill="#34a853" stroke="#137333" stroke-width="2"/>
  <text x="120" y="105" text-anchor="middle" fill="white" font-size="14" font-weight="bold">1. Form Submission</text>
  <text x="120" y="125" text-anchor="middle" fill="white" font-size="12">User submits</text>
  <text x="120" y="140" text-anchor="middle" fill="white" font-size="12">Google Form</text>
  <text x="120" y="155" text-anchor="middle" fill="white" font-size="12">response</text>
  
  <!-- Step 2: Trigger Activation -->
  <rect x="230" y="80" width="140" height="100" rx="10" fill="#ff6d00" stroke="#e65100" stroke-width="2"/>
  <text x="300" y="105" text-anchor="middle" fill="white" font-size="14" font-weight="bold">2. Trigger Fires</text>
  <text x="300" y="125" text-anchor="middle" fill="white" font-size="12">Add-on detects</text>
  <text x="300" y="140" text-anchor="middle" fill="white" font-size="12">new response</text>
  <text x="300" y="155" text-anchor="middle" fill="white" font-size="12">automatically</text>
  
  <!-- Step 3: Data Processing -->
  <rect x="410" y="80" width="140" height="100" rx="10" fill="#4285f4" stroke="#1565c0" stroke-width="2"/>
  <text x="480" y="105" text-anchor="middle" fill="white" font-size="14" font-weight="bold">3. Data Processing</text>
  <text x="480" y="125" text-anchor="middle" fill="white" font-size="12">Extract &amp;</text>
  <text x="480" y="140" text-anchor="middle" fill="white" font-size="12">standardize</text>
  <text x="480" y="155" text-anchor="middle" fill="white" font-size="12">response data</text>
  
  <!-- Step 4: Hash Generation -->
  <rect x="590" y="80" width="140" height="100" rx="10" fill="#9c27b0" stroke="#6a1b9a" stroke-width="2"/>
  <text x="660" y="105" text-anchor="middle" fill="white" font-size="14" font-weight="bold">4. Hash Generation</text>
  <text x="660" y="125" text-anchor="middle" fill="white" font-size="12">SHA-256</text>
  <text x="660" y="140" text-anchor="middle" fill="white" font-size="12">deterministic</text>
  <text x="660" y="155" text-anchor="middle" fill="white" font-size="12">hashing</text>
  
  <!-- Data Examples -->
  <rect x="50" y="200" width="680" height="60" rx="5" fill="#f1f5f9" stroke="#64748b" stroke-width="1"/>
  <text x="60" y="220" fill="#334155" font-size="12" font-weight="bold">Sample Data Flow:</text>
  <text x="60" y="240" fill="#334155" font-size="11">Response: {"name": "John Doe", "email": "john@example.com", "rating": 5}</text>
  <text x="60" y="255" fill="#334155" font-size="11">Hash: a1b2c3d4e5f6789012345678901234567890abcdef1234567890abcdef123456</text>
  
  <!-- Step 5: API Transmission -->
  <rect x="50" y="290" width="140" height="100" rx="10" fill="#f44336" stroke="#c62828" stroke-width="2"/>
  <text x="120" y="315" text-anchor="middle" fill="white" font-size="14" font-weight="bold">5. API Call</text>
  <text x="120" y="335" text-anchor="middle" fill="white" font-size="12">Secure HTTPS</text>
  <text x="120" y="350" text-anchor="middle" fill="white" font-size="12">transmission</text>
  <text x="120" y="365" text-anchor="middle" fill="white" font-size="12">to external app</text>
  
  <!-- Step 6: API Gateway -->
  <rect x="230" y="290" width="140" height="100" rx="10" fill="#607d8b" stroke="#455a64" stroke-width="2"/>
  <text x="300" y="315" text-anchor="middle" fill="white" font-size="14" font-weight="bold">6. API Gateway</text>
  <text x="300" y="335" text-anchor="middle" fill="white" font-size="12">Authentication</text>
  <text x="300" y="350" text-anchor="middle" fill="white" font-size="12">&amp; validation</text>
  <text x="300" y="365" text-anchor="middle" fill="white" font-size="12">of request</text>
  
  <!-- Step 7: Transaction Preparation -->
  <rect x="410" y="290" width="140" height="100" rx="10" fill="#795548" stroke="#5d4037" stroke-width="2"/>
  <text x="480" y="315" text-anchor="middle" fill="white" font-size="14" font-weight="bold">7. TX Preparation</text>
  <text x="480" y="335" text-anchor="middle" fill="white" font-size="12">Create Cardano</text>
  <text x="480" y="350" text-anchor="middle" fill="white" font-size="12">transaction with</text>
  <text x="480" y="365" text-anchor="middle" fill="white" font-size="12">metadata</text>
  
  <!-- Step 8: Blockchain Storage -->
  <rect x="590" y="290" width="140" height="100" rx="10" fill="#0033ad" stroke="#001d6b" stroke-width="2"/>
  <text x="660" y="315" text-anchor="middle" fill="white" font-size="14" font-weight="bold">8. Blockchain TX</text>
  <text x="660" y="335" text-anchor="middle" fill="white" font-size="12">Submit to</text>
  <text x="660" y="350" text-anchor="middle" fill="white" font-size="12">Cardano with</text>
  <text x="660" y="365" text-anchor="middle" fill="white" font-size="12">smart contract</text>
  
  <!-- Transaction Details -->
  <rect x="50" y="410" width="680" height="80" rx="5" fill="#e3f2fd" stroke="#1976d2" stroke-width="1"/>
  <text x="60" y="430" fill="#1565c0" font-size="12" font-weight="bold">Blockchain Transaction Structure:</text>
  <text x="60" y="450" fill="#1565c0" font-size="11">• Input: Platform wallet UTxO</text>
  <text x="60" y="465" fill="#1565c0" font-size="11">• Output: Contract UTxO (~2 ADA) + Change back to wallet</text>
  <text x="60" y="480" fill="#1565c0" font-size="11">• Metadata: Label 8434 with hash + form metadata</text>
  
  <!-- Verification Flow -->
  <rect x="800" y="80" width="350" height="410" rx="10" fill="#fff3e0" stroke="#f57c00" stroke-width="2"/>
  <text x="975" y="105" text-anchor="middle" fill="#ef6c00" font-size="16" font-weight="bold">Verification Flow</text>
  
  <!-- Verification Steps -->
  <rect x="820" y="130" width="130" height="70" rx="5" fill="#4caf50" stroke="#388e3c" stroke-width="1"/>
  <text x="885" y="150" text-anchor="middle" fill="white" font-size="12" font-weight="bold">9. Verification</text>
  <text x="885" y="165" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Request</text>
  <text x="885" y="185" text-anchor="middle" fill="white" font-size="11">User provides</text>
  <text x="885" y="195" text-anchor="middle" fill="white" font-size="11">original data</text>
  
  <rect x="980" y="130" width="130" height="70" rx="5" fill="#ff9800" stroke="#f57c00" stroke-width="1"/>
  <text x="1045" y="150" text-anchor="middle" fill="white" font-size="12" font-weight="bold">10. Hash</text>
  <text x="1045" y="165" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Regeneration</text>
  <text x="1045" y="185" text-anchor="middle" fill="white" font-size="11">Same SHA-256</text>
  <text x="1045" y="195" text-anchor="middle" fill="white" font-size="11">algorithm</text>
  
  <rect x="820" y="220" width="130" height="70" rx="5" fill="#2196f3" stroke="#1976d2" stroke-width="1"/>
  <text x="885" y="240" text-anchor="middle" fill="white" font-size="12" font-weight="bold">11. Blockchain</text>
  <text x="885" y="255" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Query</text>
  <text x="885" y="275" text-anchor="middle" fill="white" font-size="11">Blockfrost API</text>
  <text x="885" y="285" text-anchor="middle" fill="white" font-size="11">metadata search</text>
  
  <rect x="980" y="220" width="130" height="70" rx="5" fill="#9c27b0" stroke="#7b1fa2" stroke-width="1"/>
  <text x="1045" y="240" text-anchor="middle" fill="white" font-size="12" font-weight="bold">12. Hash</text>
  <text x="1045" y="255" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Comparison</text>
  <text x="1045" y="275" text-anchor="middle" fill="white" font-size="11">Verify match</text>
  <text x="1045" y="285" text-anchor="middle" fill="white" font-size="11">with blockchain</text>
  
  <rect x="900" y="310" width="150" height="70" rx="5" fill="#4caf50" stroke="#388e3c" stroke-width="1"/>
  <text x="975" y="330" text-anchor="middle" fill="white" font-size="12" font-weight="bold">13. Verification</text>
  <text x="975" y="345" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Certificate</text>
  <text x="975" y="365" text-anchor="middle" fill="white" font-size="11">Proof of integrity</text>
  <text x="975" y="375" text-anchor="middle" fill="white" font-size="11">with TX hash</text>
  
  <!-- Verification Query Example -->
  <rect x="820" y="400" width="310" height="70" rx="5" fill="#f1f5f9" stroke="#64748b" stroke-width="1"/>
  <text x="830" y="420" fill="#334155" font-size="12" font-weight="bold">Blockfrost Query:</text>
  <text x="830" y="435" fill="#334155" font-size="10">GET /metadata/txs/labels/8434</text>
  <text x="830" y="450" fill="#334155" font-size="10">Filter: hash = "a1b2c3d4e5f6..."</text>
  <text x="830" y="465" fill="#334155" font-size="10">Response: TX exists + metadata</text>
  
  <!-- Arrows -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
    <marker id="arrow-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2196f3"/>
    </marker>
  </defs>
  
  <!-- Horizontal arrows for main flow -->
  <line x1="190" y1="130" x2="220" y2="130" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="370" y1="130" x2="400" y2="130" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="550" y1="130" x2="580" y2="130" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Vertical arrow down -->
  <line x1="660" y1="180" x2="660" y2="280" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Horizontal arrows for processing flow -->
  <line x1="190" y1="340" x2="220" y2="340" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="370" y1="340" x2="400" y2="340" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="550" y1="340" x2="580" y2="340" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Verification flow arrows -->
  <line x1="950" y1="165" x2="970" y2="165" stroke="#2196f3" stroke-width="2" marker-end="url(#arrow-blue)"/>
  <line x1="885" y1="200" x2="885" y2="210" stroke="#2196f3" stroke-width="2" marker-end="url(#arrow-blue)"/>
  <line x1="950" y1="255" x2="970" y2="255" stroke="#2196f3" stroke-width="2" marker-end="url(#arrow-blue)"/>
  <line x1="975" y1="290" x2="975" y2="300" stroke="#2196f3" stroke-width="2" marker-end="url(#arrow-blue)"/>
  
  <!-- Privacy & Security Notes -->
  <rect x="50" y="520" width="1100" height="80" rx="5" fill="#fef2f2" stroke="#dc2626" stroke-width="1"/>
  <text x="600" y="540" text-anchor="middle" fill="#dc2626" font-size="14" font-weight="bold">Privacy &amp; Security Guarantees</text>
  <text x="60" y="560" fill="#dc2626" font-size="12">• Original response data never leaves Google's secure environment</text>
  <text x="60" y="575" fill="#dc2626" font-size="12">• Only cryptographic hashes are transmitted and stored on blockchain</text>
  <text x="60" y="590" fill="#dc2626" font-size="12">• Verification requires both original data and blockchain proof for complete validation</text>
  
  <!-- Cost Information -->
  <rect x="50" y="620" width="1100" height="60" rx="5" fill="#f0f9ff" stroke="#0369a1" stroke-width="1"/>
  <text x="600" y="640" text-anchor="middle" fill="#0369a1" font-size="14" font-weight="bold">Transaction Costs</text>
  <text x="60" y="660" fill="#0369a1" font-size="12">• Hash Storage: ~2.175 ADA per transaction (includes network fees + UTxO)</text>
  <text x="60" y="675" fill="#0369a1" font-size="12">• Hash Verification: Free (read-only blockchain queries via Blockfrost API)</text>
  
  <!-- Performance Notes -->
  <rect x="50" y="700" width="1100" height="60" rx="5" fill="#f0fdf4" stroke="#16a34a" stroke-width="1"/>
  <text x="600" y="720" text-anchor="middle" fill="#16a34a" font-size="14" font-weight="bold">Performance Characteristics</text>
  <text x="60" y="740" fill="#16a34a" font-size="12">• Automatic processing: No manual intervention required after initial setup</text>
  <text x="60" y="755" fill="#16a34a" font-size="12">• Batch processing: Multiple responses can be processed efficiently in scheduled batches</text>
</svg>